<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.jfr/share/classes/jdk/jfr/internal/EventInstrumentation.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="EventControl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="FilePurger.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jfr/share/classes/jdk/jfr/internal/EventInstrumentation.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2016, 2024, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2016, 2025, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -87,22 +87,21 @@</span>
      private static final ClassDesc ANNOTATION_REGISTERED = classDesc(Registered.class);
      private static final ClassDesc ANNOTATION_REMOVE_FIELDS = classDesc(RemoveFields.class);
      private static final ClassDesc TYPE_EVENT_CONFIGURATION = classDesc(EventConfiguration.class);
      private static final ClassDesc TYPE_ISE = Bytecode.classDesc(IllegalStateException.class);
      private static final ClassDesc TYPE_EVENT_WRITER = classDesc(EventWriter.class);
<span class="udiff-line-removed">-     private static final ClassDesc TYPE_EVENT_WRITER_FACTORY = ClassDesc.of(&quot;jdk.jfr.internal.event.EventWriterFactory&quot;);</span>
      private static final ClassDesc TYPE_OBJECT = Bytecode.classDesc(Object.class);
      private static final ClassDesc TYPE_SETTING_DEFINITION = Bytecode.classDesc(SettingDefinition.class);
      private static final MethodDesc METHOD_BEGIN = MethodDesc.of(&quot;begin&quot;, &quot;()V&quot;);
      private static final MethodDesc METHOD_COMMIT = MethodDesc.of(&quot;commit&quot;, &quot;()V&quot;);
      private static final MethodDesc METHOD_DURATION = MethodDesc.of(&quot;duration&quot;, &quot;(J)J&quot;);
      private static final MethodDesc METHOD_ENABLED = MethodDesc.of(&quot;enabled&quot;, &quot;()Z&quot;);
      private static final MethodDesc METHOD_END = MethodDesc.of(&quot;end&quot;, &quot;()V&quot;);
      private static final MethodDesc METHOD_EVENT_CONFIGURATION_SHOULD_COMMIT = MethodDesc.of(&quot;shouldCommit&quot;, &quot;(J)Z&quot;);
      private static final MethodDesc METHOD_EVENT_CONFIGURATION_GET_SETTING = MethodDesc.of(&quot;getSetting&quot;, SettingControl.class, int.class);
      private static final MethodDesc METHOD_EVENT_SHOULD_COMMIT = MethodDesc.of(&quot;shouldCommit&quot;, &quot;()Z&quot;);
<span class="udiff-line-modified-removed">-     private static final MethodDesc METHOD_GET_EVENT_WRITER_KEY = MethodDesc.of(&quot;getEventWriter&quot;, &quot;(J)&quot; + TYPE_EVENT_WRITER.descriptorString());</span>
<span class="udiff-line-modified-added">+     private static final MethodDesc METHOD_GET_EVENT_WRITER = MethodDesc.of(&quot;getEventWriter&quot;, &quot;()&quot; + TYPE_EVENT_WRITER.descriptorString());</span>
      private static final MethodDesc METHOD_IS_ENABLED = MethodDesc.of(&quot;isEnabled&quot;, &quot;()Z&quot;);
      private static final MethodDesc METHOD_RESET = MethodDesc.of(&quot;reset&quot;, &quot;()V&quot;);
      private static final MethodDesc METHOD_SHOULD_COMMIT_LONG = MethodDesc.of(&quot;shouldCommit&quot;, &quot;(J)Z&quot;);
      private static final MethodDesc METHOD_TIME_STAMP = MethodDesc.of(&quot;timestamp&quot;, &quot;()J&quot;);
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -765,12 +764,11 @@</span>
          }
          return false;
      }
  
      private void getEventWriter(CodeBuilder codeBuilder) {
<span class="udiff-line-modified-removed">-         codeBuilder.ldc(EventWriterKey.getKey());</span>
<span class="udiff-line-removed">-         invokestatic(codeBuilder, TYPE_EVENT_WRITER_FACTORY, METHOD_GET_EVENT_WRITER_KEY);</span>
<span class="udiff-line-modified-added">+         invokestatic(codeBuilder, TYPE_EVENT_WRITER, METHOD_GET_EVENT_WRITER);</span>
      }
  
      private void getEventConfiguration(CodeBuilder codeBuilder) {
          if (untypedEventConfiguration) {
              codeBuilder.getstatic(getEventClassDesc(), FIELD_EVENT_CONFIGURATION.name(), TYPE_OBJECT);
</pre>
<center><a href="EventControl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="FilePurger.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>